$.include("http://res.nie.netease.com/comm/js/ui/lightBox/basev2.css"),function(a){a.fn.lightBox=function(b){function f(){return g(this,d,e),!1}function g(a,b){if(h(),c.imageArray.length=0,c.activeImage=0,1==b.length)c.imageArray.push(new Array(a.getAttribute("href"),a.getAttribute("title")));else for(var e=0;e<b.length;e++)c.imageArray.push(new Array(b[e].getAttribute("href"),b[e].getAttribute("title")));for(;c.imageArray[c.activeImage][0]!=a.getAttribute("href");)c.activeImage++;i()}function h(){var g,h,i,j,b='<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"></a></div></div><div id="lightbox-container-image-thumb-data"><ul></ul></div></div></div></div>';if(0==a("#jquery-lightbox").length){for(a("body").append(b),g=0;g<d.length;g++)c.imageThumbArrary.push(new Array(d[g].getAttribute("href"),e[g].getAttribute("src")));for(h=0;h<c.imageThumbArrary.length;h++)a("#lightbox-container-image-thumb-data").find("ul").append('<li><a href="'+c.imageThumbArrary[h][0]+'"><img src="'+c.imageThumbArrary[h][1]+'"/></a></li>');a("#lightbox-container-image-thumb-data").find("ul").css("width",120*c.imageThumbArrary.length)}a("#lightbox-container-image-thumb-data").find("a").unbind("click").click(f),i=n(),a("#jquery-overlay").css({backgroundColor:c.overlayBgColor,opacity:c.overlayOpacity,height:i[0]}).show(),j=a("#jquery-lightbox"),j.height()>i[1]?j.fadeIn().css({top:i[3],left:(i[2]-j.width())/2+i[4]}):j.fadeIn().css({top:(i[1]-j.outerHeight())/2+i[3],left:(i[2]-j.width())/2+i[4]}),a("#lightbox-secNav-btnClose").click(function(){return o(),!1}),a(window).resize(function(){var d,b=n();a("#jquery-overlay").css({backgroundColor:c.overlayBgColor,opacity:c.overlayOpacity,height:b[0]}),d=a("#jquery-lightbox"),d.height()>b[1]?d.css({top:b[3],left:(b[2]-d.width())/2+b[4]}):d.css({top:(b[1]-d.outerHeight())/2+b[3],left:(b[2]-d.width())/2+b[4]})})}function i(){a("#lightbox-loading").show();var b=new Image;b.onload=function(){var d,e;a("#lightbox-image").attr("src",c.imageArray[c.activeImage][0]),j(),b.onload=function(){},d=n(),e=a("#jquery-lightbox"),e.height()>d[1]?e.css({top:d[3],left:(d[2]-e.width())/2+d[4]}):e.css({top:(d[1]-e.outerHeight())/2+d[3],left:(d[2]-e.width())/2+d[4]}),a(window).resize(function(){var d,b=n();a("#jquery-overlay").css({backgroundColor:c.overlayBgColor,opacity:c.overlayOpacity,height:b[0]}),d=a("#jquery-lightbox"),d.height()>b[1]?d.css({top:b[3],left:(b[2]-d.width())/2+b[4]}):d.css({top:(b[1]-d.outerHeight())/2+b[3],left:(b[2]-d.width())/2+b[4]})})},b.src=c.imageArray[c.activeImage][0]}function j(){a("#lightbox-loading").hide(),a("#lightbox-image").fadeIn(function(){k(),l()}),m()}function k(){a("#lightbox-image-details-caption").hide(),c.imageArray[c.activeImage][1]&&a("#lightbox-image-details-caption").html(c.imageArray[c.activeImage][1]).show(),c.imageArray.length>1&&a("#lightbox-image-details-currentNumber").html(" "+(c.activeImage+1)+" /"+c.imageArray.length).show()}function l(){var b,d;a("#lightbox-nav").show(),b=function(b){a("#lightbox-nav-btn"+b).show().unbind().removeClass("lightbox-nav-close").attr("title",c["txt"+b]).bind("click",function(){return"Prev"==b?c.activeImage--:c.activeImage++,i(),!1})},d=function(b){a("#lightbox-nav-btn"+b).show().unbind().addClass("lightbox-nav-close").attr("title",c["txt"+("Prev"==b?"First":"Last")]).bind("click",function(){return o(),!1})},c.imageArray.length>1&&(0!=c.activeImage?b("Prev"):d("Prev"),c.activeImage!=c.imageArray.length-1?b("Next"):d("Next"))}function m(){c.imageArray.length-1>c.activeImage&&(objNext=new Image,objNext.src=c.imageArray[c.activeImage+1][0]),c.activeImage>0&&(objPrev=new Image,objPrev.src=c.imageArray[c.activeImage-1][0])}function n(){var b=a(document).height(),c=a(window).height(),d=a(window).width(),e=a(window).scrollTop(),f=a(window).scrollLeft();return arraySize=new Array(b,c,d,e,f)}function o(){a("#jquery-lightbox").fadeOut(),a("#jquery-overlay").fadeOut()}var d,e,c={overlayBgColor:"#000",overlayOpacity:.8,containerResizeSpeed:400,txtFirst:"这是第一张",txtLast:"已是最后一张",txtNext:"点击查看下一张",txtPrev:"点击查看上一张",imageArray:[],imageThumbArrary:[],activeImage:0};return b=b||{},c=a.extend(c,b),d=this,e=this.find("img"),this.unbind("click").click(f)}}(jQuery);